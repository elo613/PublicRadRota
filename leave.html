<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Registrar Leave Records</title>
    <link rel="stylesheet" href="leave.css" />
</head>
<body>
    <div class="container">
        <h1>Registrar Leave Records</h1>

        <label for="registrar-select">Select Registrar:</label>
        <select id="registrar-select">
            <option value="" disabled selected>-- Please select a registrar to view records --</option>
        </select>

        <div id="current-cycle-container">
            <h3>Current Leave Cycle: <span id="current-cycle-display"></span></h3>
            <p>Leave cycle runs from 1st Wednesday in August to 1st Tuesday in August the following year.</p>
        </div>

        <!-- Current Cycle Section -->
        <div id="current-cycle-section" class="hidden">
            <h2>Current Cycle Leave Records</h2>
            
            <div id="leave-records">
                <h3>Leave Dates</h3>
                <table id="leave-records-table">
                    <thead>
                        <tr>
                            <th>Start Date</th>
                            <th>End Date</th>
                            <th>Leave Type</th>
                            <th>Duration (Days)</th>
                        </tr>
                    </thead>
                    <tbody id="leave-records-table-body"></tbody>
                </table>
            </div>

            <div id="leave-details-summary">
                <h3>Leave Summary</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Type of Leave</th>
                            <th>Allowance</th>
                            <th>Used</th>
                            <th>Remaining</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Annual Leave</td>
                            <td><span id="annual-leave-allowance"></span> days</td>
                            <td><span id="annual-leave-used">0</span> days</td>
                            <td><span id="annual-leave-remaining">0</span> days</td>
                        </tr>
                        <tr>
                            <td>Study Leave</td>
                            <td><span id="study-leave"></span> days</td>
                            <td><span id="study-leave-used">0</span> days</td>
                            <td><span id="study-leave-remaining">0</span> days</td>
                        </tr>
                        <tr>
                            <td>Other Leave</td>
                            <td>N/A</td>
                            <td><span id="other-leave-used">0</span> days</td>
                            <td><span id="other-leave-remaining">N/A</span></td>
                        </tr>
                    </tbody>
                </table>
                <p class="note">Note: Leave counts exclude weekends and only include dates within the current leave cycle.</p>
            </div>
        </div>

        <!-- Other Cycles Section -->
        <div id="other-cycles-section" class="hidden">
            <h2>Other Leave Cycles</h2>
            <div id="cycle-tables-container">
                <!-- Leave cycles will be inserted here dynamically -->
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const tokenString = localStorage.getItem("loginToken");
            if (!tokenString) {
                window.location.href = "index.html";
            }
        });
    </script>
    <script src="leave.js"></script>
</body>
</html>
